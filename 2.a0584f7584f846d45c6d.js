"use strict";(self.webpackChunkValantis_Jewelry=self.webpackChunkValantis_Jewelry||[]).push([[2],{2:(e,r,n)=>{n.r(r),n.d(r,{default:()=>V});var a=n(848);var t=n(964),s=n(468),c=n(540),i=n(976),l=n(710),o=n(164);var u=function(){return u=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++)for(var t in r=arguments[n])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e},u.apply(this,arguments)},f=(0,c.forwardRef)((function(e,r){var n,t=e.className,s=e.error,c=e.label,i=function(e,r){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)r.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(n[a[t]]=e[a[t]])}return n}(e,["className","error","label"]);return(0,a.jsxs)("div",{className:(0,o.A)(t,"ejQjGBzo",c&&"hOvguYAR"),children:[c&&(0,a.jsx)("label",{htmlFor:c,className:"FHeAxwfr",children:c}),(0,a.jsx)("input",u({ref:r,name:c,id:c,className:(0,o.A)("rXny0DUV",(n={},n.CPjwDuJt=s,n))},i)),s&&(0,a.jsx)("span",{className:"UOKfVEMR",children:s})]})})),d=(0,c.memo)(f);var p=n(279),h=n(271),m=function(){var e=(0,l.jL)(),r=(0,s.d4)(h.sm.VP),n=(0,c.useState)(""),t=n[0],o=n[1],u=(0,i.ok)(),f=u[0],m=u[1];return(0,c.useEffect)((function(){if(f.get("search")){var r=f.get("search");e(h.j0.byName({product:r}))}}),[]),(0,a.jsxs)("form",{onSubmit:function(r){r.preventDefault(),m({search:"".concat(t),page:"1"}),e(h.j0.byName({product:t})).finally((function(){return o("")}))},className:"jemdWahA",children:[(0,a.jsx)(d,{label:"Поиск по названию",placeholder:"Поиск продукта",name:"search",value:t,onChange:function(e){return o(e.target.value)}}),(0,a.jsx)(p.$,{size:"s",appearance:"primary",type:"submit",disabled:t.trim().length<=0||r,children:"Поиск"})]})};var j=/[\D]+/g,b=function(){var e=(0,l.jL)(),r=(0,s.d4)(h.sm.VP),n=(0,c.useState)(""),t=n[0],o=n[1],u=(0,i.ok)(),f=u[0],m=u[1];return(0,c.useEffect)((function(){if(f.get("price")){var r=f.get("price");e(h.j0.byPrice({price:Number(r)}))}}),[]),(0,a.jsxs)("form",{onSubmit:function(r){r.preventDefault(),m({price:"".concat(t),page:"1"}),e(h.j0.byPrice({price:Number(t)})).finally((function(){return o("")}))},className:"jT2HvYwN",children:[(0,a.jsx)(d,{label:"Поиск по цене",placeholder:"Введите цену",name:"price",value:t,onChange:function(e){return function(e){o(e.target.value.replace(j,""))}(e)}}),(0,a.jsx)(p.$,{size:"s",appearance:"primary",type:"submit",disabled:t.length<=0||r,children:"Поиск"})]})};var v=n(262),y=n(137),g=n(595),x=function(){var e=(0,l.jL)(),r=(0,s.d4)(g.$C.Hk),n=(0,s.d4)(g.$C.VP),t=(0,s.d4)(h.sm.VP),u=(0,i.ok)(),f=u[0],d=u[1],p=f.get("brand"),m=f.has("brand");return(0,c.useEffect)((function(){m&&e(h.j0.byBrand({brand:"null"===p?null:p}))}),[e,m,p]),(0,a.jsxs)("div",{className:"WMDpxVPY",children:[(0,a.jsx)(v.E,{weight:"regular",className:"f56W1WjU",children:"Поиск по бренду"}),(0,a.jsx)("div",{className:(0,o.A)("rVmlhVhr",n&&"eolSBl_B"),children:n?(0,a.jsx)(y.y,{className:"iwVZxCBH"}):null==r?void 0:r.map((function(r){return(0,a.jsx)("span",{role:"button",tabIndex:0,"aria-label":"Сортировать по бренду ".concat(r),className:(0,o.A)("OcQ3Px2N",(p===r&&m||"null"===p&&null===r)&&"WAJjcwxR",t&&"d7spc20R"),onClick:function(){t||d({brand:"".concat(r),page:"1"})},onKeyDown:function(n){return function(r,n){"Enter"!==n.key||t||(d({brand:"".concat(r),page:"1"}),e(h.j0.byBrand({brand:r})))}(r,n)},"aria-disabled":t,children:null===r?"No_brand":r},r)}))})]})};var N=n(918),O=function(){var e=(0,l.IT)(),r=e.isQuery,n=e.onQueryReset,t=(0,s.d4)(h.sm.VP),i=(0,l.jL)();return(0,c.useEffect)((function(){i((0,N.$)())}),[i]),(0,a.jsxs)("div",{className:"oNHTNq5J",children:[(0,a.jsx)(m,{}),(0,a.jsx)(b,{}),(0,a.jsx)(x,{}),(0,a.jsx)(p.$,{size:"m",appearance:"secondary",onClick:n,disabled:!r||t,children:"Сбросить фильтры"})]})},w=n(941),P=function(){var e=(0,s.d4)(h.sm.VP),r=(0,s.d4)(h.sm.ZE),n=(0,s.d4)(h.sm.z3),o=(0,s.d4)(w.iF.n8),u=(0,s.d4)(w.iF.F2),f=(0,s.d4)(w.iF.hG),d=(0,l.IT)(),p=d.isQuery,m=d.queryValue,j=(0,i.ok)()[0],b=(0,l.jL)();(0,c.useEffect)((function(){if(j.has("page")){var e=j.get("page");b(w.X6.setQueryPage(Number(e))),b(w.X6.setCurrentOffset(50*(Number(e)-1)))}p||b((0,w.n8)())}),[b,p,j]),(0,c.useEffect)((function(){p||b(h.j0.all({offset:f}))}),[b,f,p]);var v=(0,c.useMemo)((function(){return p?null==r?void 0:r.slice(f,f+50):r}),[f,r,p]);return(0,a.jsxs)(a.Fragment,{children:[e?(0,a.jsx)(y.y,{}):(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)(t.h,{weight:"medium",size:"h2",children:"Результаты поиска по  \n                                ".concat(m)}),(0,a.jsx)(h.EL,{products:v,error:n})]}),(null===w.n8||void 0===w.n8?void 0:w.n8.length)>1&&!n&&!e&&(0,a.jsx)(w.y2,{currentPage:u,arr:o,isLoading:e})]})};const V=function(){return(0,a.jsxs)("section",{className:"bOo2Ufa9",children:[(0,a.jsx)(t.h,{weight:"medium",size:"h1",children:"Поиск товаров"}),(0,a.jsx)(O,{}),(0,a.jsx)(P,{})]})}},964:(e,r,n)=>{n.d(r,{h:()=>i});var a=n(848),t=n(164);const s={title:"IL9IPunS",h1:"N10k9B4i",h2:"_6vNudas",regular:"uiHNpkqz",medium:"wCmG3HTZ",bold:"Yfvs5reG",uppercase:"FDYuhKAM"};var c=function(){return c=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++)for(var t in r=arguments[n])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e},c.apply(this,arguments)},i=function(e){var r=e.children,n=e.weight,i=void 0===n?"bold":n,l=e.size,o=void 0===l?"h1":l,u=e.uppercase,f=e.className,d=function(e,r){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)r.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(n[a[t]]=e[a[t]])}return n}(e,["children","weight","size","uppercase","className"]),p="".concat(o),h=(0,t.A)(s[o],s.title,s[i],u&&s.uppercase,f);return(0,a.jsx)(p,c({},d,{className:h,children:r}))}}}]);